<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Huggers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    *{
      box-sizing: border-box !important;
    }
    .hover-menu:hover{
      border-bottom: 2px solid white;
      border-radius: 6px;
    }
    .shadows{
      background-color: aliceblue;
      box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset !important;
      /* box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 3px, rgba(0, 0, 0, 0.24) 0px 1px 2px; */
    }
  </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark d-flex justify-content-center">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                TREE HUGGERS
            </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 mx-auto hover-menu" style="height: 50px;">
              <li class="nav-item">
                <a class="nav-link active fw-bold fs-5" aria-current="page" href="#">Home</a>
              </li>
            </ul>
             
            <button type="button" class="btn btn-outline-light fw-bold border-3 mx-3 rounded-pill px-4" id="enter_email" data-bs-toggle="modal" data-bs-target="#exampleModal1">
              Enter Email
            </button>
            <button type="button" id="allownotify" class="btn btn-outline-light fw-bold border-3 mx-3 rounded-pill px-4" id="enter_email" data-bs-toggle="modal" data-bs-target="#exampleModal2"  style="display: none;">
              Allow notification
            </button>
            <button type="button" class="btn btn-outline-light fw-bold border-3 mx-3 rounded-pill px-4" id="Signout" style="display: none;">
              Sign out
            </button>
            

            <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="m-5">
                    <h2 class="heading text-center mx-auto my-4">Allow Notification Permissions</h2>
                    <div class="modal-body">
                      <form>
                        <div class="mb-4 ">
                          <input type="email" id="emailToDb" class="form-control rounded-pill px-3" id="email" aria-describedby="emailHelp" placeholder="NA" disabled>
                        </div>
                        <div class="mb-4 d-grid gap-2 col-6 mx-auto">
                          <button type="submit" class="btn btn-primary graident rounded-pill">Allow</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="m-5">
                    <h2 class="heading text-center mx-auto my-4">Verify Yourself</h2>
                    <div class="modal-body">
                      
                      <h1 class="text-center text-success my-5" id="success_msg" style="display: none;">Verified Successfully</h1>
                      <div id="sawo-container" style="height: 400px; width: 100%;"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </nav>

      <div class="container">
        <div class="card m-5 border shadows" style="border-radius: 30px !important;">
          <div class="row g-0">
            <div class="col-md-4">
              <img style="border-radius: 30px !important; height: 100%;" src="https://images.unsplash.com/photo-1471180625745-944903837c22?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=580&q=80" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-8">
              <div class="card-body m-3 d-flex flex-column justify-content-between" style="height: 90%;">
                <h5 class="card-title">Data From Arduino</h5>
                <p class="card-text">Few descriptions and Details if needed
                  Lorem ipsum dolor, sit amet consectetur adipisicing elit. Repudiandae quo et, omnis maiores rerum reiciendis cupiditate sed tenetur modi earum fugit dignissimos maxime blanditiis amet quod, nisi voluptas temporibus. Placeat impedit aspernatur quod enim.
                </p>
                <table class="table table-hover">
                  <thead class=" table-light">
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Data</th>
                      <th scope="col">Current values</th>
                      <th scope="col">Needed</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th scope="row">1</th>
                      <td>Soil moisture</td>
                      <td>NA</td>
                      <td>17.58</td>
                    </tr>
                    <tr>
                      <th scope="row">2</th>
                      <td>Temperature</td>
                      <td>35&deg;C</td>
                      <td>30&deg;C</td>
                    </tr>
                    <tr>
                      <th scope="row">3</th>
                      <td>Water Level</td>
                      <td>20 cc/&#x33A1;</td>
                      <td>40 cc/&#x33A1;</td>
                    </tr>
                  </tbody>
                </table>
                <p class="card-text text-end px-3"><small class="text-primary fw-bold">Last updated 3 mins ago</small></p>
              </div>
            </div>
          </div>
        </div>
      </div>

    
     

<script src="http://websdk.sawolabs.com/sawo.min.js"></script>    
                    <script>
                        let email;
                        if(email !== undefined){
                          run();
                        }
                        console.log(email);
                        if(email===undefined){
                          var config = {
                              // should be same as the id of the container created on 3rd step
                              containerID: "sawo-container",
                              // can be one of 'email' or 'phone_number_sms'
                              identifierType: "email",
                              // Add the API key copied from 2nd step
                              apiKey: "c46880b0-cfb1-4f67-8411-70fbded71358",
                              // Add a callback here to handle the payload sent by sdk
                              onSuccess: (payload) => {
                                  email=payload.identifier;
                                  console.log(email);
                                  console.log(payload.identifier);
                                  console.log(payload)
                                  run();
                                  let s=document.getElementById("success_msg");
                                  s.style.display="block";
                                  let r=document.getElementById("sawo-container");
                                  r.style.display="none";
                                  let F=document.getElementById("emailToDb");
                                  F.placeholder=payload.identifier;

                              },
                          };
                          var sawo = new Sawo(config);
                          sawo.showForm();
                        }
                        function run(){
                          let signout=document.getElementById("Signout");
                          signout.style.display="inline-block";
                          let Enteremail=document.getElementById("enter_email");
                          Enteremail.style.display="none";
                          let allow=document.getElementById("allownotify");
                          allow.style.display="block";
                        }
                        document.getElementById("Signout").addEventListener("click",()=>{
                          let signout=document.getElementById("Signout");
                          signout.style.display="none";
                          let Enteremail=document.getElementById("enter_email");
                          Enteremail.style.display="inline-block";
                          email="failed";
                          let s=document.getElementById("success_msg");
                          s.style.display="none";
                          let allow=document.getElementById("allownotify");
                          allow.style.display="none";
                          
                        })
                    </script>
</body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>


</html>